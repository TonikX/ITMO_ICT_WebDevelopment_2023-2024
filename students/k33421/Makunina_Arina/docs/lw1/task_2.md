# Задание 2: Реализация клиентской и серверной части приложения с использованием TCP

## Описание задания

В данном задании требуется разработать клиентскую и серверную части приложения, которые обмениваются данными с использованием протокола TCP (Transmission Control Protocol). Клиент запрашивает у сервера выполнение математической операции (**вычисление площади трапеции**), параметры которой вводятся с клавиатуры. Сервер обрабатывает полученные данные и возвращает результат клиенту.

## Требования

1. **Использование библиотеки socket**: Для реализации сетевого взаимодействия обязательно использовать библиотеку `socket`.

2. **Протокол TCP**: Все обмены данными между клиентом и сервером должны выполняться с использованием протокола TCP.

## Клиентская часть

### 1. Создание клиентского сокета и подключение к серверу

Для начала клиент должен создать сокет с помощью `socket.socket(socket.AF_INET, socket.SOCK_STREAM)`. Затем, клиент должен подключиться к серверу, указав адрес сервера и порт, на котором сервер слушает подключения, с помощью `client_socket.connect(server_address)`.

### 2. Ввод параметров операции с клавиатуры

Клиент должен запросить пользователя ввести параметры математической операции с клавиатуры. В данном случае, для поиска площади трапеции, клиент должен запросить значения верхней основы (`base1`), нижней основы (`base2`) и высоты (`height`) с клавиатуры.

### 3. Отправка запроса на сервер

Клиент должен отправить параметры операции в виде строки на сервер, используя метод `send()` сокета. Параметры должны быть преобразованы в строку, например, с использованием запятых для разделения.

### 4. Получение ответа от сервера

После отправки запроса, клиент должен ожидать ответа от сервера. Для этого, используйте метод `recv()` сокета. Полученный ответ будет содержать результат выполнения операции.

### 5. Вывод результата на экран

Клиент должен вывести ответ от сервера на экран.

### 6. Завершение работы клиента

По завершению работы клиент должен закрыть сокет с помощью метода `close()`.

## Серверная часть

### 1. Создание серверного сокета и привязка к адресу

Сервер должен создать сокет и привязать его к определенному адресу и порту, где он будет прослушивать подключения клиентов, используя метод `bind()`.

### 2. Ожидание клиентских подключений

Сервер должен находиться в режиме ожидания клиентских подключений, используя метод `listen()`. В данном случае, сервер будет ожидать до 5 клиентских подключений.

### 3. Прием запросов и обработка данных

После подключения клиента, сервер должен принимать запрос от клиента с помощью метода `accept()`. Полученный запрос будет содержать параметры математической операции в виде строки.

### 4. Обработка операции и отправка результата

Сервер должен разобрать запрос и выполнить соответствующую математическую операцию. В данном случае, сервер должен вычислить площадь трапеции, используя параметры `base1`, `base2` и `height`. Результат операции должен быть отправлен обратно клиенту.

### 5. Завершение работы сервера

После обработки запроса, сервер должен закрыть сокет клиента с помощью метода `close()` и продолжить ожидать следующих клиентских подключений.

## Примеры кода

Приведены примеры клиентской и серверной частей приложения в языке Python, которые выполняют описанные выше действия.

```python
# Пример клиентской части

import socket

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_address = ('localhost', 5434)
client_socket.connect(server_address)

base1 = float(input("Введите значение верхней основы трапеции: "))
base2 = float(input("Введите значение нижней основы трапеции: "))
height = float(input("Введите значение высоты трапеции: "))

request = f"{base1},{base2},{height}"
client_socket.send(request.encode())
response = client_socket.recv(1024).decode()
print(f"Ответ от сервера: {response}")
client_socket.close()
```

```python
# Пример серверной части

import socket


def calculate_trapezoid_area(base1, base2, height):
    return ((base1 + base2) * height) / 2


server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

server_address = ('localhost', 5434)
server_socket.bind(server_address)
server_socket.listen(5)

print("Сервер запущен")

while True:
    client_socket, client_address = server_socket.accept()
    print(f"Подключено клиентское соединение с {client_address}")

    data = client

_socket.recv(1024).decode()
    print(f"Получено сообщение от клиента: {data}")

    params = data.split(',')
    if len(params) != 3:
        response = "Неправильный формат данных. Используйте формат 'base1,base2,height'"
    else:
        try:
            base1, base2, height = map(float, params)
            area = calculate_trapezoid_area(base1, base2, height)
            response = f"Площадь трапеции: {area}"
        except ValueError:
            response = "Ошибка"

    client_socket.send(response.encode())
    client_socket.close()
```


После выполнения данной задачи, клиент и сервер должны успешно обмениваться данными для выполнения математической операции "Поиск площади трапеции" с использованием протокола TCP. Этот пример демонстрирует основы сетевого взаимодействия с использованием библиотеки `socket` и протокола TCP в языке Python.
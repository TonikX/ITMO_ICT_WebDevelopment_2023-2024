# Документация по странице

## Маршруты рейтинга

### Функция `setupRatingRoutes(server: ServerApp): void`

Экспортирует функцию `setupRatingRoutes`, которая настраивает маршруты для работы с рейтингом.

#### Параметры:

- `server` (объект `ServerApp`) - экземпляр сервера приложения.

#### Пример использования:

```javascript
import { setupRatingRoutes } from './ratingRoutes'

const server = new ServerApp()
setupRatingRoutes(server)
```

### Маршрут `/rating.get`

- **Метод**: `POST`
- **Параметры запроса**: Отсутствуют
- **Тело запроса**: Отсутствует
- **Ответ**: Объект с полем `items`, содержащим список пользователей с их рейтингом

#### Пример использования:

```javascript
import axios from 'axios'

axios.post('/rating.get')
  .then(response => {
    const users = response.data.items
    // Обработка полученных данных
  })
  .catch(error => {
    // Обработка ошибки
  })
```

#### Описание логики:

- При получении запроса на маршрут `/rating.get`, функция проверяет наличие закешированных пользователей.
- Если закешированные пользователи существуют, функция отправляет клиенту закешированные результаты.
- В противном случае, функция выполняет запрос к модели `UserModel`, чтобы получить список пользователей, сортируя их по рейтингу в порядке убывания.
- Затем функция выбирает только необходимые поля (`firstName`, `lastName`, `rating`, `photoUrl`) и кэширует полученный список пользователей на 300 секунд.
- В результате функция отправляет клиенту список пользователей с их рейтингом.

**Примечание**: В случае возникновения ошибки при выполнении запроса к модели `UserModel`, функция возвращает статус ошибки 500 и сообщение "Internal Server Error".
{% extends 'air_tickets_booking/base.html' %} {% block content %}

<h1>Рейс {{flight.name}}</h1>

<h2>Пассажиры</h2>
<div class="row mb-5">
  <div class="col-md-5">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">ФИО</th>
          <th scope="col">Место</th>
        </tr>
      </thead>

      <tbody>
        {% for ticket in page_obj %}
          <tr>
            <td class="align-middle">{{ticket.passenger.first_name}}<br>{{ticket.passenger.last_name}}</td>
            <td class="align-middle">{{ticket.seat}}</td>
          </tr>
        {% endfor %} 
      </tbody>
    </table>

    {% include "air_tickets_booking/pagination.html" %}
  </div>
</div>

<h2>Схема мест</h2>
<table class="table table-striped table-hover mb-5">
  <tbody>
    {% for row in seats %}
      <tr>
        {% for seat in row %}
          <td class="text-center">
            {% if seat.is_taken %}
              <s>{{seat.name}}</s>
            {% else %}
              {{seat.name}}
            {% endif %}
          </td>
        {% endfor %} 
      </tr>
    {% endfor %}
  </tbody> 
</table>

{% if not has_ticket and user.is_authenticated %}

<h2>Забронировать билет</h2>
<div class="row">
  <div class="col-md-3">
    <form method="post">
      {% csrf_token %}
      <div class="mb-3">
        <label for="ticketSeatInput" class="form-label">Место: </label>
        <input name='seat' class="form-control" id="ticketSeatInput">
      </div>
      <button type="submit" class="btn btn-primary">Забронировать</button>
    </form>
  </div>
</div>

{% endif %}

{% endblock %}

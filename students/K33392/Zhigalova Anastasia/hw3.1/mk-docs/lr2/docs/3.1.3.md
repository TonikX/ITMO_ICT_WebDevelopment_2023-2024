# Практическая работа 3.1
## Практическое задание 3

Чтобы вывести дату выдачи самого старшего водительского удостоверения нам необходимо отсортировать объекты `driver_license` по полю `date_issue` и взять самый первый из них.
```python
oldest_license = driver_license.objects.order_by('date_issue').first()
print(f"Oldest Driver's License: {oldest_license.id_number} - Type: {oldest_license.type} - Date of Issue: {oldest_license.date_issue}")
```

Чтобы вывести самую позднюю дату владения машиной нам необходимо отсортировать объекты `driver_license` по полю `date_start` и взять самый первый из них.
```python
oldest_possession = possession.objects.order_by('date_start').first()
print(f"Oldest Possession: Car ID {oldest_possession.id_car.id} by Owner ID {oldest_possession.id_owner.id} - Start Date: {oldest_possession.date_start}")

```

Для того, чтобы подсчитать количество машин во владении каждого пользователя мы можем воспользоваться методом `carOwner.objects.annotate`, передав класс `Count('car')`
```python
users_with_car_count = carOwner.objects.annotate(car_count=Count('car'))

for user in users_with_car_count:
    print(f"User: {user.username} - Car Count: {user.car_count}")
```

По аналогии с предыдущим заданием мы можем подсчитать количество машин по определенной марке
```python
cars_by_brand_count = car.objects.values('brand').annotate(car_count=Count('brand'))

for brand_info in cars_by_brand_count:
    print(f"Brand: {brand_info['brand']} - Car Count: {brand_info['car_count']}")

```

Для того, чтобы отсортировать владельцев по дате получения прав воспользуемся методом `carOwner.objects.annotate` и затем методом `order_by` 
```python
users_sorted_by_license_issue_date = carOwner.objects.annotate(
    min_license_issue_date=Min('driver_license__date_issue')
).order_by('min_license_issue_date')

for user in users_sorted_by_license_issue_date:
    print(f"User: {user.username} - Oldest Driver's License Issue Date: {user.min_license_issue_date}")
```
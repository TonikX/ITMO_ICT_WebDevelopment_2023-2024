# Практическая работа 3.1

## Практическое задание 2

Для вывода всех всех автомобилей марки `Toyota` воспользуемся методом `car.objects.filter`, передав в качестве аргумента `brand="Toyota"`
```python
toyota_cars = car.objects.filter(brand="Toyota")
for toyota_car in toyota_cars:
    print(toyota_car.state_number, toyota_car.brand, toyota_car.model, toyota_car.color)
```

Для поиска владельцев с определенным именем воспользуемся методом `carOwner.objects.filter`, передав в качестве аргумента `name="John"`
```python
owners_with_specific_name = carOwner.objects.filter(name="John")
for owner in owners_with_specific_name:
    print(owner.username, owner.name, owner.surname, owner.date_Birth, owner.passport, owner.address, owner.nationality)
```

Далее возьмем первого пользователя и найдем его водительское удостоверение
```python
random_user = carOwner.objects.get(id=1)

driver_license = driver_license.objects.get(id_owner=random_user)

print(f"User: {random_user.username} - {random_user.name} {random_user.surname}")
print(f"Driver's License: {driver_license.id_number} - Type: {driver_license.type} - Date of Issue: {driver_license.date_issue}")

```

Для поиска владельцев красных машин добавим поле `cars` в модель `carOwner`

```python
class carOwner(models.Model):
    ...
    cars = models.ManyToManyField("car", through="possession", related_name="cars")
```

Затем получим всех владельцев при помощи метода `carOwner.objects.filter`
```python
car_owners = carOwner.objects.filter(cars__color__in=["Red"])
for owner in car_owners:
    print(owner.username, owner.name, owner.surname, owner.date_Birth, owner.passport, owner.address, owner.nationality)
    for c in owner.cars.all():
        print(c.state_number, c.color)
```

Для поиска водителей, которые владеют автомобилем начиная с 2023 года воспользуемся методом `carOwner.objects.filter`
```python
owners_with_cars_from_year = carOwner.objects.filter(
    possession__date_start__year=2023
).distinct()

for owner in owners_with_cars_from_year:
  print(f"User: {owner}")
```

Практическое задание 3: 
Необходимо реализовать следующие запросы c применением описанных методов:




Вывод даты выдачи самого старшего водительского удостоверения
>>> from myapp.models import DriverLicense
>>> oldest_license = DriverLicense.objects.order_by('issue_date').first()
>>> print("Самое старшее водительское удостоверение выдано:", oldest_license.issue_date)
Самое старшее водительское удостоверение выдано: 2022-01-01


Укажите самую позднюю дату владения машиной, имеющую какую-то из существующих моделей в вашей базе
>>> from myapp.models import Ownership, Car
>>>
>>> latest_car_ownership = Ownership.objects.filter(car__isnull=False).order_by('-end_date').first()
>>> print("Самая поздняя дата владения машиной:", latest_car_ownership.end_date)
Самая поздняя дата владения машиной: 2023-08-10


Выведите количество машин для каждого водителя
>>> # Выведите количество машин для каждого водителя
>>> owners_car_count = Owner.objects.annotate(car_count=Count('cars'))
>>> for owner in owners_car_count:
...     print(f"{owner}: {owner.car_count} машин(ы)")
...
Иванов Иван: 5 машин(ы)
Петров Петр: 3 машин(ы)
Сидоров Сидор: 5 машин(ы)
Смирнова Мария: 0 машин(ы)
Козлов Александр: 0 машин(ы)
Николаев Николай: 0 машин(ы)
Тихонова Екатерина: 0 машин(ы)
Иванов Иван: 0 машин(ы)
Петров Петр: 0 машин(ы)
Сидоров Сидор: 0 машин(ы)
Иванов Иван: 2 машин(ы)
Петров Петр: 1 машин(ы)
Сидоров Сидор: 2 машин(ы)


Подсчитайте количество машин каждой марки
>>> # Подсчитайте количество машин каждой марки
>>> car_brand_count = Car.objects.values('brand').annotate(brand_count=Count('brand'))
>>> for car in car_brand_count:
...     print(f"{car['brand']}: {car['brand_count']} машин(ы)")
...
Chevrolet: 1 машин(ы)
Ford: 3 машин(ы)
Honda: 3 машин(ы)
Nissan: 1 машин(ы)
Toyota: 3 машин(ы)
Volkswagen: 1 машин(ы)


Отсортируйте всех автовладельцев по дате выдачи удостоверения (Примечание: чтобы не выводить несколько раз одни и те же таблицы воспользуйтесь методом .distinct()

>>> from django.db.models import Count, Min
>>> owners_sorted_by_license_date = Owner.objects.annotate(earliest_license_date=Min('driverlicense__issue_date')).order_by('earliest_license_date').distinct()
>>> for owner in owners_sorted_by_license_date:
...     print(f"{owner}: самое раннее удостоверение выдано {owner.earliest_license_date}")
...
Иванов Иван: самое раннее удостоверение выдано None
Петров Петр: самое раннее удостоверение выдано None
Сидоров Сидор: самое раннее удостоверение выдано None
Иванов Иван: самое раннее удостоверение выдано None
Петров Петр: самое раннее удостоверение выдано None
Сидоров Сидор: самое раннее удостоверение выдано None
Иванов Иван: самое раннее удостоверение выдано 2022-01-01
Петров Петр: самое раннее удостоверение выдано 2022-02-15
Сидоров Сидор: самое раннее удостоверение выдано 2022-03-20
Смирнова Мария: самое раннее удостоверение выдано 2022-04-10
Козлов Александр: самое раннее удостоверение выдано 2022-05-25
Николаев Николай: самое раннее удостоверение выдано 2022-06-30
Тихонова Екатерина: самое раннее удостоверение выдано 2022-07-05
>>>



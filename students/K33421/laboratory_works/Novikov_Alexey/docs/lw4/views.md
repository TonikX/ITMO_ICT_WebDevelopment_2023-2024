# Представления

В директории `/views` будем хранить большие компоненты со сложной логикой, которые будут использовать другие компоненты и 
будут являться полноценным представлением для конкретной страницы.

=== "Вход"

    ```html title="views/Login.vue"
    --8<-- "laboratory_work_4/src/views/Login.vue"
    ```

    В шаблоне этого компонента будем выводить кнопку входа и загрузочный экран, отключенный по умолчанию.

    При клике на кнопку будем отправлять запрос в бэкенд на получение ссылки на авторизации, после чего будем переводить 
    пользователя на неё.

    После успешной авторизации пользователь будет переведён обратно на эту же страницу с query параметром `code`, который нужно 
    отправить обратно на бэкенд.

    Для этого при загрузке страницы будем проверять наличие `code`, и, если он есть, будем отправлять отправлять вызывать 
    функцию `login` хранилища авторизации с этим аргументом.


=== "Опрос"

    ```html title="views/Survey.vue"
    --8<-- "laboratory_work_4/src/views/Survey.vue"
    ```

    Это наша основная страница.

    При загрузке будем запрашивать у бэкенда список вопросов, которые затем поместим в реактивную переменную `formFields`.
    Также при загрузке в словаре `formValues` создадим элементы с пустыми значениями и ключами, равными id вопросов.

    Для генерации шаблона воспользуемся директивой `v-for`, с помощью которой будем итерироваться по значениям в ранее 
    созданном списке `formFields`. И с помощью директивы `v-if` будем проверять значение поля `component` каждого вопроса 
    и сравнивать его с названиями наших компонент, чтобы понять, для какого вопроса какой компонент использовать.

    В каждый компонент будем передавать соответсвующие для их вопроса `text` и `helpText`. 

    Также будем принимать их `emits` и помещать полученные значения в словарь под нужным ключом.

    Кнопку отправки будем блокировать, если есть незаполненные поля (длина массива `errors` > 0) или форма в процессе отправки.

    Клик кнопки будет вызывать функцию `onSubmit`, которая перепарсит словарь ответов в список и отправит на бэкенд, затем 
    обновит текст в хранилище `infoStore` и переведёт пользователя на страницу информации.


=== "Информация"

    ```html title="views/Info.vue"
    --8<-- "laboratory_work_4/src/views/Info.vue"
    ```

    При загрузке этой страницы из хранилища `infoStore` будет доставаться текст и выводиться с помощью компонента `InfoContainer` 
    в окружении картинок птиц.
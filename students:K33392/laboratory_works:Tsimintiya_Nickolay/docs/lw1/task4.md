# Задание №4

???+ question "Задание"

    Реализовать двухпользовательский или многопользовательский чат. Реализация
    многопользовательского чата позволяет получить максимальное количество
    баллов.

    Реализовать с помощью протокола TCP – 100% баллов, с помощью UDP – 80%.  
    Обязательно использовать библиотеку `threading`.

    Для реализации с помощью UDP, `threading` использовать для получения
    сообщений у клиента.  
    Для применения с TCP необходимо запускать клиентские подключения И прием
    и отправку сообщений всем юзерам на сервере в потоках.  
    Не забудьте сохранять юзеров, чтобы потом отправлять им сообщения.

=== "Сервер"

    ```Python title="server.py"
    --8<-- "Lab1/Task4/server.py"
    ```
    

    - Повторяем процедуру стандартной конфигурации из предыдущих заданий. 
    - Запускаем event loop.
    - Принимаем входящее клиентское подключение. 
    - Инициализируем поток, который будет обрабатывать клиентское сообщение. 
    - Настраиваем поток, как демон, для возможности асинхронной работы относительно вызывающщего потока
    - Декодируем полученное сообщение. 
    - Ретранслируем полученное сообщение всем подключенным пользователям. 
    
    

=== "Клиент"

    ```Python title="client.py"
    --8<-- "Lab1/Task4/client.py"
    ```

    - Настраиваем клиентский сокет. 
    - Подключаемся к серверу. 
    - Регистрируем имя пользователя. 
    - Создаем поток, слушающий появление новых сообщений 
    - Создаем event loop.
    - Ожидаем пользовательского ввода сообщения. 
    
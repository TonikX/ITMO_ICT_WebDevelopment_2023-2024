# Отчёт по лабораторной работе

**Цель:** овладеть практическими навыками и умениями реализации web-сервисов средствами Django 3 и СУБД PostgreSQL.

**Оборудование:** компьютерный класс.

**Программное обеспечение:** Python 3.6+, Django 3, PostgreSQL*.

## Практическое задание

**Вариант 6: Табло победителей автогонок**

Табло должно отображать информацию об участниках автогонок, включая следующие данные:

- ФИО участника
- Название команды
- Описание автомобиля
- Описание участника
- Опыт
- Класс участника

Необходимо реализовать следующий функционал:

1. **Регистрация новых пользователей.** Пользователи могут регистрироваться на сайте.

2. **Просмотр автогонок и регистрацию гонщиков.** Пользователи могут просматривать информацию о предстоящих автогонках и регистрироваться в качестве участников. Пользователи имеют возможность редактирования и удаления своих регистраций.

3. **Написание отзывов и комментариев к автогонкам.** Пользователи могут оставлять отзывы и комментарии к автогонкам. Для этого комментаторы должны зарегистрироваться. При добавлении комментариев сохраняются следующие данные: дата заезда, текст комментария, тип комментария (вопрос о сотрудничестве, вопрос о гонках, иное), рейтинг (1-10), информация о комментаторе.

4. **Администраторская панель.** Администратор может указать время заезда и результаты средствами Django-admin.

5. **Клиентская часть.** В клиентской части должна формироваться таблица всех заездов и результатов конкретной гонки.

---

Для создания нового Django проекта была использована команда "django-admin startproject race_project". Эта команда создает каталог с именем "race_project", который будет содержать весь проект.
Для создания нового Django приложения, в данном случае "races", была использована команда "python manage.py startapp races".

Для реализации табло победителей гонок с описанным функционалом, создадим модели для хранения информации о пользователях, гонках, регистрациях участников, отзывах и комментариях.

В файле `models.py` создадим следующие модели:

```python
from django.db import models
from django.contrib.auth.models import User

# Модель для хранения информации о пользователях
class UserProfile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    description = models.TextField()
    experience = models.PositiveIntegerField()
    class_name = models.CharField(max_length=20)

# Модель для хранения информации о гонках
class Race(models.Model):
    name = models.CharField(max_length=100)
    date = models.DateField()
    result = models.CharField(max_length=100, blank=True, null=True)
    participants = models.ManyToManyField(UserProfile, through='Registration')

# Модель для хранения информации о регистрациях участников
class Registration(models.Model):
    race = models.ForeignKey(Race, on_delete=models.CASCADE)
    participant = models.ForeignKey(UserProfile, on_delete=models.CASCADE)

# Модель для хранения информации о комментариях
class Comment(models.Model):
    race = models.ForeignKey(Race, on_delete=models.CASCADE)
    commentator = models.ForeignKey(UserProfile, on_delete=models.CASCADE)
    comment_text = models.TextField()
    comment_date = models.DateTimeField(auto_now_add=True)
    comment_type = models.CharField(max_length=20)
    rating = models.PositiveIntegerField()
```

С этими моделями создается следующая структура данных:

1. `UserProfile`: Хранит информацию о пользователях, их описании, опыте и классе участника.

2. `Race`: Содержит информацию о гонках, включая название, дату, результат и участников, связанных через модель `Registration`.

3. `Registration`: Эта модель связывает пользователей (участников) с гонками.

4. `Comment`: Содержит информацию о комментариях к гонкам, включая дату, текст комментария, тип комментария, рейтинг и информацию о комментаторе.

Эти модели создают связи между гонками, участниками и комментаторами, позволяя реализовать функционал, описанный в вашем задании.